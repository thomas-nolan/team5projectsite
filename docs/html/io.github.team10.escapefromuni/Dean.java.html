<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Dean.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">io.github.team10.escapefromuni</a> &gt; <span class="el_source">Dean.java</span></div><h1>Dean.java</h1><pre class="source lang-java linenums">package io.github.team10.escapefromuni;

import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.math.MathUtils;
import com.badlogic.gdx.math.Vector2;

/**
 * NEW FOR ASSESSMENT 2.
 * This class contains the logic for the dean
 */
public class Dean extends Player {

<span class="nc" id="L13">  private boolean reached = false;</span>
  private final float roomHeight;
  private final float roomWidth;
  private Texture deanTexture;

<span class="nc" id="L18">  private DifficultySetup difficultySetup = new DifficultySetup();</span>

  /**
   * NEW FOR ASSESSMENT 2.
   * This constructor sets up the implementation of the dean
   *
   * @param speed the speed at which the dean moves
   * @param width the width of the dean
   * @param height the height of the dean
   * @param game the main LibGDX game instance
   * @param roomWidth the width of the room is in
   * @param roomHeight the height of the room the dean is in
   */
  public Dean(float speed, float width, float height,
       EscapeGame game, float roomWidth, float roomHeight) {
<span class="nc" id="L33">    super(speed, width, height, game);</span>
<span class="nc" id="L34">    this.roomWidth = roomWidth;</span>
<span class="nc" id="L35">    this.roomHeight = roomHeight;</span>

    // creates the Dean's sprite and sets its texture and size
<span class="nc" id="L38">    deanTexture = new Texture(&quot;dean.png&quot;);</span>
<span class="nc" id="L39">    playerSprite.setTexture(deanTexture);</span>
<span class="nc" id="L40">    playerSprite.setSize(width, height);</span>

    // Places the Dean in the centre of the room
<span class="nc" id="L43">    setCenter(roomWidth / 2f, roomHeight / 2f);</span>
<span class="nc" id="L44">  }</span>

  /**
   * NEW FOR ASSESSMENT 2.
   * This controls the logic for the dean
   * Gets the dean to be constantly chasing the user
   */
  @Override
  public void update(float delta) {
<span class="nc bnc" id="L53" title="All 2 branches missed.">    if (reached) {</span>
<span class="nc" id="L54">      return;</span>
    }
<span class="nc" id="L56">    chasePlayer(delta);</span>
<span class="nc" id="L57">    super.update(delta);</span>
<span class="nc" id="L58">  }</span>

  /**
   * NEW FOR ASSESSMENT 2.
   * This handles the logic for the dean chasing the user
   * The Dean moves towards the player each frame
   *
   * @param delta the time elapsed since the last frame in seconds
   */
  private void chasePlayer(float delta) {

    // Get current position of the Dean and the user
<span class="nc" id="L70">    Player player = game.gameController.getPlayer();</span>
<span class="nc" id="L71">    Vector2 playerPos = player.getCenter();</span>
<span class="nc" id="L72">    Vector2 deanPos = getCenter();</span>

    // Calculates the direction vector of the player and the Dean
<span class="nc" id="L75">    float dx = playerPos.x - deanPos.x;</span>
<span class="nc" id="L76">    float dy = playerPos.y - deanPos.y;</span>

<span class="nc" id="L78">    float distance = deanPos.dst(playerPos);</span>

    // Enables movement if the Dean is not on the player
<span class="nc bnc" id="L81" title="All 2 branches missed.">    if (distance &gt; 0) {</span>
<span class="nc" id="L82">      float speedModifier = difficultySetup.readDifficulty().enemySpeedModifier;</span>
<span class="nc" id="L83">      float moveX = (dx / distance) * speed * delta * speedModifier;</span>
<span class="nc" id="L84">      float moveY = (dy / distance) * speed * delta * speedModifier;</span>
<span class="nc" id="L85">      playerSprite.translateX(moveX);</span>
<span class="nc" id="L86">      playerSprite.translateY(moveY);</span>
    }
<span class="nc" id="L88">  }</span>

  /**
   * NEW FOR ASSESSMENT 2.
   * This is a simple check to see if the Dean has caught the player
   *
   * @param player the player controlled by the user
   * @return a boolean value stating if the player is caught
   */
  public boolean checkReached(Player player) {
    // Checks if the Dean and player is touching
    // Returns false if the player has the invincibility event triggered
<span class="nc bnc" id="L100" title="All 6 branches missed.">    if (!reached &amp;&amp; player.checkCollision(this.playerSprite) &amp;&amp; !player.isInvincible()) {</span>
<span class="nc" id="L101">      reached = true;</span>
<span class="nc" id="L102">      return true;</span>
    }
<span class="nc" id="L104">    return false;</span>
  }

  /**
   * NEW FOR ASSESSMENT 2.
   * This disposes of the Deans texture
   */
  @Override
  public void dispose() {
<span class="nc" id="L113">    super.dispose();</span>
<span class="nc bnc" id="L114" title="All 2 branches missed.">    if (deanTexture != null) {</span>
<span class="nc" id="L115">      deanTexture.dispose();</span>
    }
<span class="nc" id="L117">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>